{% extends 'base.html' %}

{% block title %}
  <title>Cart</title>
{% endblock title %}


{% block content %}
{% load static %}
<div class="container">
 <div class="row">
	<div class="col-lg-12">
		<div class="box-element">
      <a  class="btn btn-outline-dark" href="#">&#x2190; Continue Shopping</a><br>
      <a href="{% url 'checkout' %}" class="btn btn-outline-dark">Checkout</a>
		</div>

		<br>
      <table class="table">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Image</th>
            <th scope="col">Title</th>
            <th scope="col">Quantity</th>
            <th scope="col">Price</th>
            <th scope="col">Total</th>
            <th scope="col">Action</th>

          </tr>
        </thead>


        <tbody class="">
          {% if cart %} 
              {% for item in cart %}
                <tr class="bodd product_data">
                  <th scope="row">{{item.product.id}}</th>
                  <td><img class="row-image" src="{{ item.product.image.url }}" alt="{{ item.product.title }}"></td>
                  <td>{{item.product.title}}</td>
                  
                  {% if item.product.quantity >= item.cart_quantity %}
                  <td>
                    <div class="input-group">
                      <button class="input-group-text decrementBtn changeQuantity" data-product="{{item.product.id}}">-</button>
                      <input type="text" name="quantity" class="input-group-text qty-input" value="{{item.cart_quantity}}" style="width: 100px;">
                      <button data-product="{{item.product.id}}" class="input-group-text incrementBtn changeQuantity" type="submit">+</button>
                      <small style="font-style: italic;">{{item.product.quantity}} items left</small>
                    </div>
                  </td>
                  {% else %}
                      <td class="text text-danger">Out Of Stock</td>
                  {% endif %}   
                  <td>{{item.product.selling_price}}</td>

                  <td>{{item.get_total}}</td>

                  <td>
                    <button class="btn btn-danger delete-cart-item" data-product="{{item.product.id}}">
                      <i class="fa fa-trash"></i>
                    </button>
                  </td>
                </tr>
              {% endfor %}  
          {% else %}
              <h4> Your cart is empty</h4> 
          {% endif %}     
        </tbody>

      </table>
      <th><h5 style="margin-left: 800px;">Total:<strong>Rs {{total_price}}</strong></h5></th>

    
   
      
      
  

{% endblock content %}